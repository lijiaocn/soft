# 差异火焰图：展示两个火焰图之间的差异

火焰图是用来做性能分析的，通过火焰度了解了程序运行期间的情况以后，接下来是有针对性地修改调优。
调整之后，还需要在制作一个新的火焰图，通过对比调优前和调优后的火焰图，评估调整是否有效。

有时候可能发现系统升级之后，某些指标突然升高，这时候也可以对比升级前和升级后的火焰图，找到那些耗时增加的函数。

最简单的对比方式就是将修改前后两个火焰图并行排列，肉眼找不同，这样显然很不方便。Brendan Gregg想出了一招：差异火焰图（Differential Flame Graphs）。

在最近一次制作的火焰图上，耗时相比前一次增加的函数用红色，耗时减少的函数用蓝色：

![差异火焰图](/img/linux/zfs-flamegraph-diff.svg)

## 参考
